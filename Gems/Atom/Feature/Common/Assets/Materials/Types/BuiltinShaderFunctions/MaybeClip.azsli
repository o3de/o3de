/*
 * Copyright (c) Contributors to the Open 3D Engine Project.
 * For complete copyright and license terms please see the LICENSE at the root of this distribution.
 *
 * SPDX-License-Identifier: Apache-2.0 OR MIT
 *
 */

#pragma once

#include "../MaterialInputs/AlphaInput.azsli"

void MaybeClip(float2 uv[2])
{
    // Alpha
    float2 baseColorUV = uv[MaterialSrg::m_baseColorMapUvIndex];
    float2 opacityUV = uv[MaterialSrg::m_opacityMapUvIndex];
    float alpha = SampleAlpha(
        MaterialSrg::m_baseColorMap,
        MaterialSrg::m_opacityMap,
        baseColorUV,
        opacityUV,
        MaterialSrg::m_sampler,
        o_opacity_source);

    CheckClipping(alpha, MaterialSrg::m_opacityFactor);
}